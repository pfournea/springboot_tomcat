package be.securex.sss.dimonaconverterservice.controller

import be.securex.sss.dimonaconverterservice.MediaTypeRepository
import be.securex.sss.dimonaconverterservice.dto.*
import com.google.common.collect.Lists
import org.springframework.boot.test.web.client.TestRestTemplate
import org.springframework.http.*
import org.springframework.test.context.ActiveProfiles
import org.springframework.web.util.UriComponentsBuilder
import spock.lang.Shared
import spock.lang.Unroll

import java.time.LocalDate
import java.time.LocalDateTime

/**
 * Created by 6060 on 30/09/2015.
 */
@ActiveProfiles("unittest")
class ConverterControllerTest extends AbstractWebIntegrationTest {
    @Shared
    String contractUUID_event_str = UUID.randomUUID().toString()

    @Unroll("Convert #contractType")
    def "Test convert ContractEvent - Creation"() {
        given:
        def contract = new ContractDto(contractType, beginDate, LocalDate.of(2015, 11, 04), workHours, numberOfDays, numberOfHours, fadNr, employeeInfo, firm, "218", EmployeeStatute.BEDIENDE, UUID.fromString(contractUUID_event_str), null, null)
        def contractCreation = new ContractCreationDto(metaData, contract)

        def targetUrl = UriComponentsBuilder.fromUriString(url)
                .path("/api/convert/contractcreationevent")
                .build()
                .toUriString();
        def httpHeaders = new HttpHeaders();

        httpHeaders.setContentType(MediaTypeRepository.CONTRACTEVENT_MEDIA_TYPE);
        httpHeaders.setAccept(Lists.newArrayList(MediaType.APPLICATION_XML));
        HttpEntity httpEntity = new HttpEntity(contractCreation, httpHeaders);

        when:
        def result = new TestRestTemplate().exchange(targetUrl, HttpMethod.POST, httpEntity, String.class)

        then:
        result instanceof ResponseEntity
        result.statusCode == status
        result.getBody() == xml

        where:
        workHours      | beginDate                  | numberOfDays | numberOfHours | fadNr | employeeInfo      | firm      | metaData      | contractType              | status                    | xml
        getWorkHours() | LocalDate.of(2015, 10, 16) | null         | null          | null  | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.XTRA         | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><newContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><xtra><date>2015-10-16</date><workHours><startDate>2015-11-12</startDate><startTime>08:00:00</startTime><endDate>2015-11-12</endDate><endTime>12:00:00</endTime><break>P0Y0M0DT0H15M0S</break></workHours><workHours><startDate>2015-11-12</startDate><startTime>21:00:00</startTime><endDate>2015-11-13</endDate><endTime>02:00:00</endTime><break>P0Y0M0DT0H30M0S</break></workHours></xtra></contract><paritairComite>218</paritairComite><employeeStatute>employee</employeeStatute></contractInfo><contractUuid>${contractUUID_event_str}</contractUuid></newContract></ContractEvent>"
        getWorkHours() | LocalDate.of(2015, 10, 16) | null         | null          | null  | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.FLEXI_DAG    | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><newContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><flexiDay><date>2015-10-16</date><workHours><startDate>2015-11-12</startDate><startTime>08:00:00</startTime><endDate>2015-11-12</endDate><endTime>12:00:00</endTime><break>P0Y0M0DT0H15M0S</break></workHours><workHours><startDate>2015-11-12</startDate><startTime>21:00:00</startTime><endDate>2015-11-13</endDate><endTime>02:00:00</endTime><break>P0Y0M0DT0H30M0S</break></workHours></flexiDay></contract><paritairComite>218</paritairComite><employeeStatute>employee</employeeStatute></contractInfo><contractUuid>${contractUUID_event_str}</contractUuid></newContract></ContractEvent>"
        null           | LocalDate.of(2015, 10, 16) | null         | null          | null  | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.FLEXI_PERIOD | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><newContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><flexiPeriod><startDate>2015-10-16</startDate><endDate>2015-11-04</endDate></flexiPeriod></contract><paritairComite>218</paritairComite><employeeStatute>employee</employeeStatute></contractInfo><contractUuid>${contractUUID_event_str}</contractUuid></newContract></ContractEvent>"
        null           | LocalDate.of(2015, 10, 16) | 10           | 0             | "001" | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.STUDENT      | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><newContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><student><startDate>2015-10-16</startDate><endDate>2015-11-04</endDate><numberOfDays>10</numberOfDays><FAONumber>001</FAONumber></student></contract><paritairComite>218</paritairComite><employeeStatute>employee</employeeStatute></contractInfo><contractUuid>${contractUUID_event_str}</contractUuid></newContract></ContractEvent>"
        null           | LocalDate.of(2015, 10, 16) | 10           | 0             | "fad" | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.STUDENT      | HttpStatus.NOT_ACCEPTABLE | null
        null           | LocalDate.of(2017, 1, 1)   | 10           | 100           | "001" | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.STUDENT      | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><newContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><student><startDate>2017-01-01</startDate><endDate>2015-11-04</endDate><numberOfHours>100</numberOfHours><FAONumber>001</FAONumber></student></contract><paritairComite>218</paritairComite><employeeStatute>employee</employeeStatute></contractInfo><contractUuid>${contractUUID_event_str}</contractUuid></newContract></ContractEvent>"
    }

    @Unroll
    def "Test convert ContractEvent - Update #contractType"() {
        given:
        def originalContract = new ContractDto(contractType, beginDate, LocalDate.of(2015, 11, 04), workHours, numberOfDays, numberOfHours, fadNr, employeeInfo, firm, "218", EmployeeStatute.ARBEIDER, null, LabourContractId.create('123'), null)
        def updateContract = new ContractDto(contractType, beginDate, LocalDate.of(2015, 11, 04), workHours2, numberOfDays2, numberOfHours2, fadNr2, employeeInfo, firm, "218", EmployeeStatute.ARBEIDER, null, LabourContractId.create('123'), null)
        def contractUpdate = new ContractUpdateDto(metaData, originalContract, updateContract)

        def targetUrl = UriComponentsBuilder.fromUriString(url)
                .path("/api/convert/contractupdateevent")
                .build()
                .toUriString();
        def httpHeaders = new HttpHeaders();
        httpHeaders.setContentType(MediaTypeRepository.CONTRACTEVENT_MEDIA_TYPE);
        httpHeaders.setAccept(Lists.newArrayList(MediaType.APPLICATION_XML));
        HttpEntity httpEntity = new HttpEntity(contractUpdate, httpHeaders);

        when:
        def result = new TestRestTemplate().exchange(targetUrl, HttpMethod.POST, httpEntity, String.class)

        then:
        result instanceof ResponseEntity
        result.statusCode == status
        result.getBody() == xml

        where:
        beginDate                  | workHours      | numberOfDays | numberOfHours | fadNr | workHours2      | numberOfDays2 | numberOfHours2 | fadNr2 | employeeInfo      | firm      | metaData      | contractType              | status                    | xml
        LocalDate.of(2015, 10, 16) | getWorkHours() | null         | null          | null  | getWorkHours2() | null          | null           | null   | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.XTRA         | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><updateContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><originalEmployeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></originalEmployeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><xtra><date>2015-10-16</date><workHours><startDate>2015-11-12</startDate><startTime>08:00:00</startTime><endDate>2015-11-12</endDate><endTime>17:00:00</endTime><break>P0Y0M0DT0H60M0S</break></workHours></xtra></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></contractInfo><originalContractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><xtra><date>2015-10-16</date><workHours><startDate>2015-11-12</startDate><startTime>08:00:00</startTime><endDate>2015-11-12</endDate><endTime>12:00:00</endTime><break>P0Y0M0DT0H15M0S</break></workHours><workHours><startDate>2015-11-12</startDate><startTime>21:00:00</startTime><endDate>2015-11-13</endDate><endTime>02:00:00</endTime><break>P0Y0M0DT0H30M0S</break></workHours></xtra></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></originalContractInfo><contractIdentifier><contractId>123</contractId></contractIdentifier></updateContract></ContractEvent>"
        LocalDate.of(2015, 10, 16) | getWorkHours() | null         | null          | null  | getWorkHours2() | null          | null           | null   | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.FLEXI_DAG    | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><updateContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><originalEmployeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></originalEmployeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><flexiDay><date>2015-10-16</date><workHours><startDate>2015-11-12</startDate><startTime>08:00:00</startTime><endDate>2015-11-12</endDate><endTime>17:00:00</endTime><break>P0Y0M0DT0H60M0S</break></workHours></flexiDay></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></contractInfo><originalContractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><flexiDay><date>2015-10-16</date><workHours><startDate>2015-11-12</startDate><startTime>08:00:00</startTime><endDate>2015-11-12</endDate><endTime>12:00:00</endTime><break>P0Y0M0DT0H15M0S</break></workHours><workHours><startDate>2015-11-12</startDate><startTime>21:00:00</startTime><endDate>2015-11-13</endDate><endTime>02:00:00</endTime><break>P0Y0M0DT0H30M0S</break></workHours></flexiDay></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></originalContractInfo><contractIdentifier><contractId>123</contractId></contractIdentifier></updateContract></ContractEvent>"
        LocalDate.of(2015, 10, 16) | null           | null         | null          | null  | null            | null          | null           | null   | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.FLEXI_PERIOD | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><updateContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><originalEmployeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></originalEmployeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><flexiPeriod><startDate>2015-10-16</startDate><endDate>2015-11-04</endDate></flexiPeriod></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></contractInfo><originalContractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><flexiPeriod><startDate>2015-10-16</startDate><endDate>2015-11-04</endDate></flexiPeriod></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></originalContractInfo><contractIdentifier><contractId>123</contractId></contractIdentifier></updateContract></ContractEvent>"
        LocalDate.of(2015, 10, 16) | null           | 10           | null          | "001" | null            | 9             | null           | "002"  | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.STUDENT      | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><updateContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><originalEmployeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></originalEmployeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><student><startDate>2015-10-16</startDate><endDate>2015-11-04</endDate><numberOfDays>9</numberOfDays><FAONumber>002</FAONumber></student></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></contractInfo><originalContractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><student><startDate>2015-10-16</startDate><endDate>2015-11-04</endDate><numberOfDays>10</numberOfDays><FAONumber>001</FAONumber></student></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></originalContractInfo><contractIdentifier><contractId>123</contractId></contractIdentifier></updateContract></ContractEvent>"
        LocalDate.of(2015, 10, 16) | null           | 10           | null          | "fad" | null            | 9             | null           | "fad"  | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.STUDENT      | HttpStatus.NOT_ACCEPTABLE | null
        LocalDate.of(2017, 1, 1)   | null           | 10           | 100           | "001" | null            | 9             | 90             | "002"  | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.STUDENT      | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><updateContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><originalEmployeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></originalEmployeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><student><startDate>2017-01-01</startDate><endDate>2015-11-04</endDate><numberOfHours>90</numberOfHours><FAONumber>002</FAONumber></student></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></contractInfo><originalContractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><student><startDate>2017-01-01</startDate><endDate>2015-11-04</endDate><numberOfHours>100</numberOfHours><FAONumber>001</FAONumber></student></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></originalContractInfo><contractIdentifier><contractId>123</contractId></contractIdentifier></updateContract></ContractEvent>"
    }

    @Unroll
    def "Test convert ContractEvent - Update with SapPerNr for #contractType"() {
        given:
        def originalContract = new ContractDto(contractType, beginDate, LocalDate.of(2015, 11, 04), workHours, numberOfDays, numberOfHours, fadNr, employeeInfo, firm, "218", EmployeeStatute.ARBEIDER, null, LabourContractId.create('123'), SapPerNr.create('01234567'))
        def updateContract = new ContractDto(contractType, beginDate, LocalDate.of(2015, 11, 04), workHours2, numberOfDays2, numberOfHours2, fadNr2, employeeInfo, firm, "218", EmployeeStatute.ARBEIDER, null, LabourContractId.create('123'), SapPerNr.create('01234567'))
        def contractUpdate = new ContractUpdateDto(metaData, originalContract, updateContract)

        def targetUrl = UriComponentsBuilder.fromUriString(url)
                .path("/api/convert/contractupdateevent")
                .build()
                .toUriString()
        def httpHeaders = new HttpHeaders()
        httpHeaders.setContentType(MediaTypeRepository.CONTRACTEVENT_MEDIA_TYPE)
        httpHeaders.setAccept(Lists.newArrayList(MediaType.APPLICATION_XML))
        HttpEntity httpEntity = new HttpEntity(contractUpdate, httpHeaders)

        when:
        def result = new TestRestTemplate().exchange(targetUrl, HttpMethod.POST, httpEntity, String.class)

        then:
        result instanceof ResponseEntity
        result.statusCode == status
        result.getBody() == xml

        where:
        beginDate                  | workHours      | numberOfDays | numberOfHours | fadNr | workHours2      | numberOfDays2 | numberOfHours2 | fadNr2 | employeeInfo      | firm      | metaData      | contractType              | status                    | xml
        LocalDate.of(2015, 10, 16) | getWorkHours() | null         | null          | null  | getWorkHours2() | null          | null           | null   | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.XTRA         | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><updateContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><originalEmployeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></originalEmployeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><xtra><date>2015-10-16</date><workHours><startDate>2015-11-12</startDate><startTime>08:00:00</startTime><endDate>2015-11-12</endDate><endTime>17:00:00</endTime><break>P0Y0M0DT0H60M0S</break></workHours></xtra></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></contractInfo><originalContractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><xtra><date>2015-10-16</date><workHours><startDate>2015-11-12</startDate><startTime>08:00:00</startTime><endDate>2015-11-12</endDate><endTime>12:00:00</endTime><break>P0Y0M0DT0H15M0S</break></workHours><workHours><startDate>2015-11-12</startDate><startTime>21:00:00</startTime><endDate>2015-11-13</endDate><endTime>02:00:00</endTime><break>P0Y0M0DT0H30M0S</break></workHours></xtra></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></originalContractInfo><contractIdentifier><contractId>123</contractId><sapPerNr>01234567</sapPerNr></contractIdentifier></updateContract></ContractEvent>"
        LocalDate.of(2015, 10, 16) | getWorkHours() | null         | null          | null  | getWorkHours2() | null          | null           | null   | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.FLEXI_DAG    | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><updateContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><originalEmployeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></originalEmployeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><flexiDay><date>2015-10-16</date><workHours><startDate>2015-11-12</startDate><startTime>08:00:00</startTime><endDate>2015-11-12</endDate><endTime>17:00:00</endTime><break>P0Y0M0DT0H60M0S</break></workHours></flexiDay></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></contractInfo><originalContractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><flexiDay><date>2015-10-16</date><workHours><startDate>2015-11-12</startDate><startTime>08:00:00</startTime><endDate>2015-11-12</endDate><endTime>12:00:00</endTime><break>P0Y0M0DT0H15M0S</break></workHours><workHours><startDate>2015-11-12</startDate><startTime>21:00:00</startTime><endDate>2015-11-13</endDate><endTime>02:00:00</endTime><break>P0Y0M0DT0H30M0S</break></workHours></flexiDay></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></originalContractInfo><contractIdentifier><contractId>123</contractId><sapPerNr>01234567</sapPerNr></contractIdentifier></updateContract></ContractEvent>"
        LocalDate.of(2015, 10, 16) | null           | null         | null          | null  | null            | null          | null           | null   | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.FLEXI_PERIOD | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><updateContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><originalEmployeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></originalEmployeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><flexiPeriod><startDate>2015-10-16</startDate><endDate>2015-11-04</endDate></flexiPeriod></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></contractInfo><originalContractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><flexiPeriod><startDate>2015-10-16</startDate><endDate>2015-11-04</endDate></flexiPeriod></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></originalContractInfo><contractIdentifier><contractId>123</contractId><sapPerNr>01234567</sapPerNr></contractIdentifier></updateContract></ContractEvent>"
        LocalDate.of(2015, 10, 16) | null           | 10           | null          | "001" | null            | 9             | null           | "002"  | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.STUDENT      | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><updateContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><originalEmployeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></originalEmployeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><student><startDate>2015-10-16</startDate><endDate>2015-11-04</endDate><numberOfDays>9</numberOfDays><FAONumber>002</FAONumber></student></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></contractInfo><originalContractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><student><startDate>2015-10-16</startDate><endDate>2015-11-04</endDate><numberOfDays>10</numberOfDays><FAONumber>001</FAONumber></student></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></originalContractInfo><contractIdentifier><contractId>123</contractId><sapPerNr>01234567</sapPerNr></contractIdentifier></updateContract></ContractEvent>"
        LocalDate.of(2015, 10, 16) | null           | 10           | null          | "fad" | null            | 9             | null           | "fad"  | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.STUDENT      | HttpStatus.NOT_ACCEPTABLE | null
        LocalDate.of(2017, 1, 1)   | null           | 10           | 100           | "001" | null            | 9             | 90             | "002"  | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.STUDENT      | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><updateContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><originalEmployeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></originalEmployeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><student><startDate>2017-01-01</startDate><endDate>2015-11-04</endDate><numberOfHours>90</numberOfHours><FAONumber>002</FAONumber></student></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></contractInfo><originalContractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><student><startDate>2017-01-01</startDate><endDate>2015-11-04</endDate><numberOfHours>100</numberOfHours><FAONumber>001</FAONumber></student></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></originalContractInfo><contractIdentifier><contractId>123</contractId><sapPerNr>01234567</sapPerNr></contractIdentifier></updateContract></ContractEvent>"
    }

    @Unroll
    def "Test convert ContractEvent - Cancel"() {
        given:
        def originalContract = new ContractDto(contractType, LocalDate.of(2015, 10, 16), LocalDate.of(2015, 11, 04), workHours, numberOfDays, null, fadNr, employeeInfo, firm, "218", EmployeeStatute.ARBEIDER, null, LabourContractId.create('123'), null)
        def updateContract = new ContractDto(contractType, LocalDate.of(2015, 10, 16), LocalDate.of(2015, 11, 04), workHours2, numberOfDays2, null, fadNr2, employeeInfo, firm, "218", EmployeeStatute.ARBEIDER, null, LabourContractId.create('123'), null)
        def contractCancellation = new ContractUpdateDto(metaData, originalContract, updateContract)

        def targetUrl = UriComponentsBuilder.fromUriString(url)
                .path("/api/convert/contractcancellationevent")
                .build()
                .toUriString();
        def httpHeaders = new HttpHeaders();
        httpHeaders.setContentType(MediaTypeRepository.CONTRACTEVENT_MEDIA_TYPE);
        httpHeaders.setAccept(Lists.newArrayList(MediaType.APPLICATION_XML));
        HttpEntity httpEntity = new HttpEntity(contractCancellation, httpHeaders);

        when:
        def result = new TestRestTemplate().exchange(targetUrl, HttpMethod.POST, httpEntity, String.class)

        then:
        result instanceof ResponseEntity
        result.statusCode == status
        result.getBody() == xml

        where:
        workHours      | numberOfDays | fadNr | workHours2      | numberOfDays2 | fadNr2 | employeeInfo      | firm      | metaData      | contractType              | status                    | xml
        getWorkHours() | null         | null  | getWorkHours2() | null          | null   | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.XTRA         | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><cancelContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><originalEmployeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></originalEmployeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><xtra><date>2015-10-16</date><workHours><startDate>2015-11-12</startDate><startTime>08:00:00</startTime><endDate>2015-11-12</endDate><endTime>17:00:00</endTime><break>P0Y0M0DT0H60M0S</break></workHours></xtra></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></contractInfo><originalContractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><xtra><date>2015-10-16</date><workHours><startDate>2015-11-12</startDate><startTime>08:00:00</startTime><endDate>2015-11-12</endDate><endTime>12:00:00</endTime><break>P0Y0M0DT0H15M0S</break></workHours><workHours><startDate>2015-11-12</startDate><startTime>21:00:00</startTime><endDate>2015-11-13</endDate><endTime>02:00:00</endTime><break>P0Y0M0DT0H30M0S</break></workHours></xtra></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></originalContractInfo><contractIdentifier><contractId>123</contractId></contractIdentifier></cancelContract></ContractEvent>"
        getWorkHours() | null         | null  | getWorkHours2() | null          | null   | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.FLEXI_DAG    | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><cancelContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><originalEmployeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></originalEmployeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><flexiDay><date>2015-10-16</date><workHours><startDate>2015-11-12</startDate><startTime>08:00:00</startTime><endDate>2015-11-12</endDate><endTime>17:00:00</endTime><break>P0Y0M0DT0H60M0S</break></workHours></flexiDay></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></contractInfo><originalContractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><flexiDay><date>2015-10-16</date><workHours><startDate>2015-11-12</startDate><startTime>08:00:00</startTime><endDate>2015-11-12</endDate><endTime>12:00:00</endTime><break>P0Y0M0DT0H15M0S</break></workHours><workHours><startDate>2015-11-12</startDate><startTime>21:00:00</startTime><endDate>2015-11-13</endDate><endTime>02:00:00</endTime><break>P0Y0M0DT0H30M0S</break></workHours></flexiDay></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></originalContractInfo><contractIdentifier><contractId>123</contractId></contractIdentifier></cancelContract></ContractEvent>"
        null           | null         | null  | null            | null          | null   | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.FLEXI_PERIOD | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><cancelContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><originalEmployeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></originalEmployeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><flexiPeriod><startDate>2015-10-16</startDate><endDate>2015-11-04</endDate></flexiPeriod></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></contractInfo><originalContractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><flexiPeriod><startDate>2015-10-16</startDate><endDate>2015-11-04</endDate></flexiPeriod></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></originalContractInfo><contractIdentifier><contractId>123</contractId></contractIdentifier></cancelContract></ContractEvent>"
        null           | 10           | "001" | null            | 9             | "002"  | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.STUDENT      | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><cancelContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><originalEmployeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></originalEmployeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><student><startDate>2015-10-16</startDate><endDate>2015-11-04</endDate><numberOfDays>9</numberOfDays><FAONumber>002</FAONumber></student></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></contractInfo><originalContractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><student><startDate>2015-10-16</startDate><endDate>2015-11-04</endDate><numberOfDays>10</numberOfDays><FAONumber>001</FAONumber></student></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></originalContractInfo><contractIdentifier><contractId>123</contractId></contractIdentifier></cancelContract></ContractEvent>"
        null           | 10           | "fad" | null            | 9             | "fad"  | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.STUDENT      | HttpStatus.NOT_ACCEPTABLE | null
    }

    @Unroll
    def "Test convert ContractEvent - Cancel with SapPerNr"() {
        given:
        def originalContract = new ContractDto(contractType, LocalDate.of(2015, 10, 16), LocalDate.of(2015, 11, 04), workHours, numberOfDays, null, fadNr, employeeInfo, firm, "218", EmployeeStatute.ARBEIDER, null, LabourContractId.create('123'), SapPerNr.create('01234567'))
        def updateContract = new ContractDto(contractType, LocalDate.of(2015, 10, 16), LocalDate.of(2015, 11, 04), workHours2, numberOfDays2, null, fadNr2, employeeInfo, firm, "218", EmployeeStatute.ARBEIDER, null, LabourContractId.create('123'), SapPerNr.create('01234567'))
        def contractCancellation = new ContractUpdateDto(metaData, originalContract, updateContract)

        def targetUrl = UriComponentsBuilder.fromUriString(url)
                .path("/api/convert/contractcancellationevent")
                .build()
                .toUriString();
        def httpHeaders = new HttpHeaders();
        httpHeaders.setContentType(MediaTypeRepository.CONTRACTEVENT_MEDIA_TYPE);
        httpHeaders.setAccept(Lists.newArrayList(MediaType.APPLICATION_XML));
        HttpEntity httpEntity = new HttpEntity(contractCancellation, httpHeaders);

        when:
        def result = new TestRestTemplate().exchange(targetUrl, HttpMethod.POST, httpEntity, String.class)

        then:
        result instanceof ResponseEntity
        result.statusCode == status
        result.getBody() == xml

        where:
        workHours      | numberOfDays | fadNr | workHours2      | numberOfDays2 | fadNr2 | employeeInfo      | firm      | metaData      | contractType              | status                    | xml
        getWorkHours() | null         | null  | getWorkHours2() | null          | null   | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.XTRA         | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><cancelContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><originalEmployeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></originalEmployeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><xtra><date>2015-10-16</date><workHours><startDate>2015-11-12</startDate><startTime>08:00:00</startTime><endDate>2015-11-12</endDate><endTime>17:00:00</endTime><break>P0Y0M0DT0H60M0S</break></workHours></xtra></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></contractInfo><originalContractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><xtra><date>2015-10-16</date><workHours><startDate>2015-11-12</startDate><startTime>08:00:00</startTime><endDate>2015-11-12</endDate><endTime>12:00:00</endTime><break>P0Y0M0DT0H15M0S</break></workHours><workHours><startDate>2015-11-12</startDate><startTime>21:00:00</startTime><endDate>2015-11-13</endDate><endTime>02:00:00</endTime><break>P0Y0M0DT0H30M0S</break></workHours></xtra></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></originalContractInfo><contractIdentifier><contractId>123</contractId><sapPerNr>01234567</sapPerNr></contractIdentifier></cancelContract></ContractEvent>"
        getWorkHours() | null         | null  | getWorkHours2() | null          | null   | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.FLEXI_DAG    | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><cancelContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><originalEmployeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></originalEmployeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><flexiDay><date>2015-10-16</date><workHours><startDate>2015-11-12</startDate><startTime>08:00:00</startTime><endDate>2015-11-12</endDate><endTime>17:00:00</endTime><break>P0Y0M0DT0H60M0S</break></workHours></flexiDay></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></contractInfo><originalContractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><flexiDay><date>2015-10-16</date><workHours><startDate>2015-11-12</startDate><startTime>08:00:00</startTime><endDate>2015-11-12</endDate><endTime>12:00:00</endTime><break>P0Y0M0DT0H15M0S</break></workHours><workHours><startDate>2015-11-12</startDate><startTime>21:00:00</startTime><endDate>2015-11-13</endDate><endTime>02:00:00</endTime><break>P0Y0M0DT0H30M0S</break></workHours></flexiDay></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></originalContractInfo><contractIdentifier><contractId>123</contractId><sapPerNr>01234567</sapPerNr></contractIdentifier></cancelContract></ContractEvent>"
        null           | null         | null  | null            | null          | null   | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.FLEXI_PERIOD | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><cancelContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><originalEmployeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></originalEmployeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><flexiPeriod><startDate>2015-10-16</startDate><endDate>2015-11-04</endDate></flexiPeriod></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></contractInfo><originalContractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><flexiPeriod><startDate>2015-10-16</startDate><endDate>2015-11-04</endDate></flexiPeriod></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></originalContractInfo><contractIdentifier><contractId>123</contractId><sapPerNr>01234567</sapPerNr></contractIdentifier></cancelContract></ContractEvent>"
        null           | 10           | "001" | null            | 9             | "002"  | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.STUDENT      | HttpStatus.OK             | "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><ContractEvent xmlns=\"http://www.securex.be/contractevent/v1\"><metaData><sender>hire-app</sender><fupMessageInstanceId>-1</fupMessageInstanceId><creationTimestamp>2015-01-30T10:10:00.000</creationTimestamp></metaData><cancelContract><employeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></employeeInfo><originalEmployeeInfo><title>DEHEER</title><firstName>firstname</firstName><lastName>lastname</lastName><gender xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xsi:type=\"xs:string\">MALE</gender><birthDate>2015-10-16</birthDate><birthCountry>000</birthCountry><nationality>000</nationality><registerNumber>00010100105</registerNumber><address><street>street</street><houseNumber>13</houseNumber><boxNumber>7</boxNumber><zip>9000</zip><city>city</city><countryCode>000</countryCode></address></originalEmployeeInfo><contractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><student><startDate>2015-10-16</startDate><endDate>2015-11-04</endDate><numberOfDays>9</numberOfDays><FAONumber>002</FAONumber></student></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></contractInfo><originalContractInfo><FDCP><firmNumber>123</firmNumber><departmentNumber></departmentNumber><category></category></FDCP><contract><student><startDate>2015-10-16</startDate><endDate>2015-11-04</endDate><numberOfDays>10</numberOfDays><FAONumber>001</FAONumber></student></contract><paritairComite>218</paritairComite><employeeStatute>worker</employeeStatute></originalContractInfo><contractIdentifier><contractId>123</contractId><sapPerNr>01234567</sapPerNr></contractIdentifier></cancelContract></ContractEvent>"
        null           | 10           | "fad" | null            | 9             | "fad"  | getEmployeeInfo() | getFirm() | getMetaData() | ContractType.STUDENT      | HttpStatus.NOT_ACCEPTABLE | null
    }

    @Unroll("convert #contractEventFile to XeiDim")
    def "Test convert ContractEvent to XeiDim"() {
        given:
        def contractEvent = ClassLoader.getSystemResourceAsStream("xml/contractevent/" + contractEventFile).text
        def targetUrl = UriComponentsBuilder.fromUriString(url)
                .path("/api/convert/xeidim")
                .build()
                .toUriString();
        def httpHeaders = new HttpHeaders();
        httpHeaders.setContentType(MediaType.APPLICATION_XML);
        httpHeaders.setAccept(Lists.newArrayList(MediaType.APPLICATION_JSON));
        HttpEntity httpEntity = new HttpEntity(contractEvent, httpHeaders);

        when:
        def result = new TestRestTemplate().exchange(targetUrl, HttpMethod.POST, httpEntity, String.class)

        then:
        result instanceof ResponseEntity
        result.statusCode == HttpStatus.OK
        result.getBody() == body

        where:
        contractEventFile                          | body
        "contractevent_create_definite_term.xml"   | "{\"xeiDims\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><XEI_DIM><PERSON><FULL_NAME>lastname firstname</FULL_NAME><LAST_NAME>lastname</LAST_NAME><FIRST_NAME>firstname</FIRST_NAME><GENDER>1</GENDER><NATIONALITY>000</NATIONALITY><BIRTH_DATE>16/10/2015</BIRTH_DATE><BIRTH_COUNTRY>000</BIRTH_COUNTRY><NUM_NAT_REG>00010100105</NUM_NAT_REG><CONTRACT><PAYGROUP><FIRM_NR>123</FIRM_NR><DEP_NR>00</DEP_NR><CAT_NR></CAT_NR></PAYGROUP><DIMONA_DECLARATION><DECLARATION_TYPE>1</DECLARATION_TYPE></DIMONA_DECLARATION><CONTRACT_NATURE>2</CONTRACT_NATURE><DATE_EFF_START>01/01/2016</DATE_EFF_START><DATE_FORESEEN_END>31/01/2016</DATE_FORESEEN_END><DATE_BREACH>31/01/2016</DATE_BREACH><PAR_COM>218</PAR_COM><EMPLOYEE_STATUTE>2</EMPLOYEE_STATUTE><CONTRACT_UUID>534d9621-3b3d-4d46-b74b-388011872b43</CONTRACT_UUID></CONTRACT></PERSON></XEI_DIM>\"]}"
        "contractevent_create_indefinite_term.xml" | "{\"xeiDims\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><XEI_DIM><PERSON><FULL_NAME>lastname firstname</FULL_NAME><LAST_NAME>lastname</LAST_NAME><FIRST_NAME>firstname</FIRST_NAME><GENDER>1</GENDER><NATIONALITY>000</NATIONALITY><BIRTH_DATE>16/10/2015</BIRTH_DATE><BIRTH_COUNTRY>000</BIRTH_COUNTRY><NUM_NAT_REG>00010100105</NUM_NAT_REG><CONTRACT><PAYGROUP><FIRM_NR>123</FIRM_NR><DEP_NR></DEP_NR><CAT_NR></CAT_NR></PAYGROUP><DIMONA_DECLARATION><DECLARATION_TYPE>1</DECLARATION_TYPE></DIMONA_DECLARATION><CONTRACT_NATURE>1</CONTRACT_NATURE><DATE_EFF_START>01/01/2016</DATE_EFF_START><DATE_FORESEEN_END>31/01/2016</DATE_FORESEEN_END><DATE_BREACH>31/01/2016</DATE_BREACH><PAR_COM>218</PAR_COM><EMPLOYEE_STATUTE>2</EMPLOYEE_STATUTE><CONTRACT_UUID>534d9621-3b3d-4d46-b74b-388011872b43</CONTRACT_UUID></CONTRACT></PERSON></XEI_DIM>\"]}"
        "contractevent_create_extra.xml"           | "{\"xeiDims\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><XEI_DIM><PERSON><FULL_NAME>lastname firstname</FULL_NAME><LAST_NAME>lastname</LAST_NAME><FIRST_NAME>firstname</FIRST_NAME><GENDER>1</GENDER><NATIONALITY>000</NATIONALITY><BIRTH_DATE>16/10/2015</BIRTH_DATE><BIRTH_COUNTRY>000</BIRTH_COUNTRY><NUM_NAT_REG>00010100105</NUM_NAT_REG><CONTRACT><PAYGROUP><FIRM_NR>123</FIRM_NR><DEP_NR></DEP_NR><CAT_NR></CAT_NR></PAYGROUP><DIMONA_DECLARATION><DECLARATION_TYPE>1</DECLARATION_TYPE></DIMONA_DECLARATION><CONTRACT_NATURE>2</CONTRACT_NATURE><DATE_EFF_START>16/10/2015</DATE_EFF_START><DATE_FORESEEN_END>16/10/2015</DATE_FORESEEN_END><DATE_BREACH>16/10/2015</DATE_BREACH><WORKHOURS><HOURLINE><DATE_START>16/10/2015</DATE_START><TIME_START>800</TIME_START><DATE_STOP>16/10/2015</DATE_STOP><TIME_STOP>1200</TIME_STOP><PAUZE>15</PAUZE></HOURLINE><HOURLINE><DATE_START>16/10/2015</DATE_START><TIME_START>1300</TIME_START><DATE_STOP>16/10/2015</DATE_STOP><TIME_STOP>1800</TIME_STOP><PAUZE>30</PAUZE></HOURLINE></WORKHOURS><PAR_COM>218</PAR_COM><CONTRACT_SOCIAL><EMPLOYEE_TYPE>EXT</EMPLOYEE_TYPE><HORECA_CONTINGENT_FLAG>1</HORECA_CONTINGENT_FLAG></CONTRACT_SOCIAL><EMPLOYEE_STATUTE>2</EMPLOYEE_STATUTE><CONTRACT_UUID>534d9621-3b3d-4d46-b74b-388011872b43</CONTRACT_UUID></CONTRACT></PERSON></XEI_DIM>\"]}"
        "contractevent_create_student.xml"         | "{\"xeiDims\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><XEI_DIM><PERSON><FULL_NAME>lastname firstname</FULL_NAME><LAST_NAME>lastname</LAST_NAME><FIRST_NAME>firstname</FIRST_NAME><GENDER>1</GENDER><NATIONALITY>000</NATIONALITY><BIRTH_DATE>16/10/2015</BIRTH_DATE><BIRTH_COUNTRY>000</BIRTH_COUNTRY><NUM_NAT_REG>00010100105</NUM_NAT_REG><CONTRACT><PAYGROUP><FIRM_NR>123</FIRM_NR><DEP_NR></DEP_NR><CAT_NR></CAT_NR></PAYGROUP><DIMONA_DECLARATION><DECLARATION_TYPE>1</DECLARATION_TYPE></DIMONA_DECLARATION><CONTRACT_NATURE>2</CONTRACT_NATURE><DATE_EFF_START>16/10/2015</DATE_EFF_START><DATE_FORESEEN_END>20/12/2015</DATE_FORESEEN_END><DATE_BREACH>20/12/2015</DATE_BREACH><PAR_COM>218</PAR_COM><AFFILIATION><EXPL_NR>001</EXPL_NR></AFFILIATION><CONTRACT_SOCIAL><EMPLOYEE_TYPE>STU</EMPLOYEE_TYPE><PLANNED_DAYS_NR>10</PLANNED_DAYS_NR><HORECA_CONTINGENT_FLAG>1</HORECA_CONTINGENT_FLAG></CONTRACT_SOCIAL><EMPLOYEE_STATUTE>2</EMPLOYEE_STATUTE><CONTRACT_UUID>534d9621-3b3d-4d46-b74b-388011872b43</CONTRACT_UUID></CONTRACT></PERSON></XEI_DIM>\"]}"
        "contractevent_create_student_hours.xml"   | "{\"xeiDims\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><XEI_DIM><PERSON><FULL_NAME>lastname firstname</FULL_NAME><LAST_NAME>lastname</LAST_NAME><FIRST_NAME>firstname</FIRST_NAME><GENDER>1</GENDER><NATIONALITY>000</NATIONALITY><BIRTH_DATE>16/10/2015</BIRTH_DATE><BIRTH_COUNTRY>000</BIRTH_COUNTRY><NUM_NAT_REG>00010100105</NUM_NAT_REG><CONTRACT><PAYGROUP><FIRM_NR>123</FIRM_NR><DEP_NR></DEP_NR><CAT_NR></CAT_NR></PAYGROUP><DIMONA_DECLARATION><DECLARATION_TYPE>1</DECLARATION_TYPE></DIMONA_DECLARATION><CONTRACT_NATURE>2</CONTRACT_NATURE><DATE_EFF_START>01/01/2017</DATE_EFF_START><DATE_FORESEEN_END>30/01/2017</DATE_FORESEEN_END><DATE_BREACH>30/01/2017</DATE_BREACH><PAR_COM>218</PAR_COM><AFFILIATION><EXPL_NR>001</EXPL_NR></AFFILIATION><CONTRACT_SOCIAL><EMPLOYEE_TYPE>STU</EMPLOYEE_TYPE><PLANNED_HOURS_NR>100</PLANNED_HOURS_NR><HORECA_CONTINGENT_FLAG>1</HORECA_CONTINGENT_FLAG></CONTRACT_SOCIAL><EMPLOYEE_STATUTE>2</EMPLOYEE_STATUTE><CONTRACT_UUID>534d9621-3b3d-4d46-b74b-388011872b43</CONTRACT_UUID></CONTRACT></PERSON></XEI_DIM>\"]}"
        "contractevent_create_flexi_period.xml"    | "{\"xeiDims\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><XEI_DIM><PERSON><FULL_NAME>lastname firstname</FULL_NAME><LAST_NAME>lastname</LAST_NAME><FIRST_NAME>firstname</FIRST_NAME><GENDER>1</GENDER><NATIONALITY>000</NATIONALITY><BIRTH_DATE>16/10/2015</BIRTH_DATE><BIRTH_COUNTRY>000</BIRTH_COUNTRY><NUM_NAT_REG>00010100105</NUM_NAT_REG><CONTRACT><PAYGROUP><FIRM_NR>123</FIRM_NR><DEP_NR></DEP_NR><CAT_NR></CAT_NR></PAYGROUP><DIMONA_DECLARATION><DECLARATION_TYPE>1</DECLARATION_TYPE></DIMONA_DECLARATION><CONTRACT_NATURE>2</CONTRACT_NATURE><DATE_EFF_START>16/10/2015</DATE_EFF_START><DATE_FORESEEN_END>20/12/2015</DATE_FORESEEN_END><DATE_BREACH>20/12/2015</DATE_BREACH><PAR_COM>218</PAR_COM><CONTRACT_SOCIAL><EMPLOYEE_TYPE>FLX</EMPLOYEE_TYPE></CONTRACT_SOCIAL><EMPLOYEE_STATUTE>2</EMPLOYEE_STATUTE><CONTRACT_UUID>534d9621-3b3d-4d46-b74b-388011872b43</CONTRACT_UUID></CONTRACT></PERSON></XEI_DIM>\"]}"
        "contractevent_update.xml"                 | "{\"xeiDims\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><XEI_DIM><PERSON><FULL_NAME>lastname firstname</FULL_NAME><LAST_NAME>lastname</LAST_NAME><FIRST_NAME>firstname</FIRST_NAME><GENDER>1</GENDER><NATIONALITY>000</NATIONALITY><BIRTH_DATE>16/10/2015</BIRTH_DATE><BIRTH_COUNTRY>000</BIRTH_COUNTRY><NUM_NAT_REG>00010100105</NUM_NAT_REG><CONTRACT><PAYGROUP><FIRM_NR>123</FIRM_NR><DEP_NR></DEP_NR><CAT_NR></CAT_NR></PAYGROUP><DIMONA_DECLARATION><DECLARATION_TYPE>3</DECLARATION_TYPE><DATE_EFF_START_ORIG>08/10/2015</DATE_EFF_START_ORIG><DATE_BREACH_ORIG>08/10/2015</DATE_BREACH_ORIG><DATE_FORESEEN_END_ORIG>08/10/2015</DATE_FORESEEN_END_ORIG><CONTRACT_NATURE_ORIG>2</CONTRACT_NATURE_ORIG></DIMONA_DECLARATION><AC_NR>123</AC_NR><CONTRACT_NATURE>2</CONTRACT_NATURE><DATE_EFF_START>16/10/2015</DATE_EFF_START><DATE_FORESEEN_END>16/10/2015</DATE_FORESEEN_END><DATE_BREACH>16/10/2015</DATE_BREACH><WORKHOURS><HOURLINE><DATE_START>16/10/2015</DATE_START><TIME_START>800</TIME_START><DATE_STOP>16/10/2015</DATE_STOP><TIME_STOP>1200</TIME_STOP><PAUZE>15</PAUZE></HOURLINE><HOURLINE><DATE_START>16/10/2015</DATE_START><TIME_START>1300</TIME_START><DATE_STOP>16/10/2015</DATE_STOP><TIME_STOP>1800</TIME_STOP><PAUZE>30</PAUZE></HOURLINE></WORKHOURS><PAR_COM>218</PAR_COM><CONTRACT_SOCIAL><EMPLOYEE_TYPE>EXT</EMPLOYEE_TYPE><HORECA_CONTINGENT_FLAG>1</HORECA_CONTINGENT_FLAG></CONTRACT_SOCIAL><EMPLOYEE_STATUTE>2</EMPLOYEE_STATUTE><CONTRACT_UUID>534d9621-3b3d-4d46-b74b-388011872b43</CONTRACT_UUID></CONTRACT></PERSON></XEI_DIM>\"]}"
        "contractevent_update_definite_term.xml"   | "{\"xeiDims\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><XEI_DIM><PERSON><FULL_NAME>lastname firstname</FULL_NAME><LAST_NAME>lastname</LAST_NAME><FIRST_NAME>firstname</FIRST_NAME><GENDER>1</GENDER><NATIONALITY>000</NATIONALITY><BIRTH_DATE>16/10/2015</BIRTH_DATE><BIRTH_COUNTRY>000</BIRTH_COUNTRY><NUM_NAT_REG>00010100105</NUM_NAT_REG><CONTRACT><PAYGROUP><FIRM_NR>123</FIRM_NR><DEP_NR></DEP_NR><CAT_NR></CAT_NR></PAYGROUP><DIMONA_DECLARATION><DECLARATION_TYPE>3</DECLARATION_TYPE><DATE_EFF_START_ORIG>01/01/2016</DATE_EFF_START_ORIG><DATE_BREACH_ORIG>31/01/2016</DATE_BREACH_ORIG><DATE_FORESEEN_END_ORIG>31/01/2016</DATE_FORESEEN_END_ORIG><CONTRACT_NATURE_ORIG>2</CONTRACT_NATURE_ORIG></DIMONA_DECLARATION><AC_NR>123</AC_NR><CONTRACT_NATURE>2</CONTRACT_NATURE><DATE_EFF_START>01/01/2016</DATE_EFF_START><DATE_FORESEEN_END>15/01/2016</DATE_FORESEEN_END><DATE_BREACH>15/01/2016</DATE_BREACH><PAR_COM>218</PAR_COM><EMPLOYEE_STATUTE>2</EMPLOYEE_STATUTE><CONTRACT_UUID>534d9621-3b3d-4d46-b74b-388011872b43</CONTRACT_UUID></CONTRACT></PERSON></XEI_DIM>\"]}"
        "contractevent_update_student.xml"         | "{\"xeiDims\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><XEI_DIM><PERSON><FULL_NAME>lastname firstname</FULL_NAME><LAST_NAME>lastname</LAST_NAME><FIRST_NAME>firstname</FIRST_NAME><GENDER>1</GENDER><NATIONALITY>000</NATIONALITY><BIRTH_DATE>16/10/2015</BIRTH_DATE><BIRTH_COUNTRY>000</BIRTH_COUNTRY><NUM_NAT_REG>00010100105</NUM_NAT_REG><CONTRACT><PAYGROUP><FIRM_NR>123</FIRM_NR><DEP_NR></DEP_NR><CAT_NR></CAT_NR></PAYGROUP><DIMONA_DECLARATION><DECLARATION_TYPE>5</DECLARATION_TYPE><DATE_EFF_START_ORIG>16/10/2015</DATE_EFF_START_ORIG><DATE_BREACH_ORIG>20/10/2015</DATE_BREACH_ORIG><DATE_FORESEEN_END_ORIG>20/10/2015</DATE_FORESEEN_END_ORIG><CONTRACT_NATURE_ORIG>2</CONTRACT_NATURE_ORIG></DIMONA_DECLARATION><AC_NR>123</AC_NR><CONTRACT_NATURE>2</CONTRACT_NATURE><DATE_EFF_START>16/10/2015</DATE_EFF_START><DATE_FORESEEN_END>18/10/2015</DATE_FORESEEN_END><DATE_BREACH>18/10/2015</DATE_BREACH><PAR_COM>218</PAR_COM><AFFILIATION><EXPL_NR>0001</EXPL_NR></AFFILIATION><CONTRACT_SOCIAL><EMPLOYEE_TYPE>STU</EMPLOYEE_TYPE><PLANNED_DAYS_NR>7</PLANNED_DAYS_NR><HORECA_CONTINGENT_FLAG>1</HORECA_CONTINGENT_FLAG></CONTRACT_SOCIAL><EMPLOYEE_STATUTE>2</EMPLOYEE_STATUTE><CONTRACT_UUID>534d9621-3b3d-4d46-b74b-388011872b43</CONTRACT_UUID></CONTRACT></PERSON></XEI_DIM>\",\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><XEI_DIM><PERSON><FULL_NAME>lastname firstname</FULL_NAME><LAST_NAME>lastname</LAST_NAME><FIRST_NAME>firstname</FIRST_NAME><GENDER>1</GENDER><NATIONALITY>000</NATIONALITY><BIRTH_DATE>16/10/2015</BIRTH_DATE><BIRTH_COUNTRY>000</BIRTH_COUNTRY><NUM_NAT_REG>00010100105</NUM_NAT_REG><CONTRACT><PAYGROUP><FIRM_NR>123</FIRM_NR><DEP_NR></DEP_NR><CAT_NR></CAT_NR></PAYGROUP><DIMONA_DECLARATION><DECLARATION_TYPE>3</DECLARATION_TYPE><DATE_EFF_START_ORIG>16/10/2015</DATE_EFF_START_ORIG><DATE_BREACH_ORIG>20/10/2015</DATE_BREACH_ORIG><DATE_FORESEEN_END_ORIG>20/10/2015</DATE_FORESEEN_END_ORIG><CONTRACT_NATURE_ORIG>2</CONTRACT_NATURE_ORIG></DIMONA_DECLARATION><AC_NR>123</AC_NR><CONTRACT_NATURE>2</CONTRACT_NATURE><DATE_EFF_START>16/10/2015</DATE_EFF_START><DATE_FORESEEN_END>18/10/2015</DATE_FORESEEN_END><DATE_BREACH>18/10/2015</DATE_BREACH><PAR_COM>218</PAR_COM><AFFILIATION><EXPL_NR>0001</EXPL_NR></AFFILIATION><CONTRACT_SOCIAL><EMPLOYEE_TYPE>STU</EMPLOYEE_TYPE><PLANNED_DAYS_NR>7</PLANNED_DAYS_NR><HORECA_CONTINGENT_FLAG>1</HORECA_CONTINGENT_FLAG></CONTRACT_SOCIAL><EMPLOYEE_STATUTE>2</EMPLOYEE_STATUTE><CONTRACT_UUID>534d9621-3b3d-4d46-b74b-388011872b43</CONTRACT_UUID></CONTRACT></PERSON></XEI_DIM>\"]}"
        "contractevent_update_student_uren.xml"    | "{\"xeiDims\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><XEI_DIM><PERSON><FULL_NAME>STUDENT MIJNNIEUWE</FULL_NAME><LAST_NAME>STUDENT</LAST_NAME><FIRST_NAME>MIJNNIEUWE</FIRST_NAME><GENDER>1</GENDER><NATIONALITY>000</NATIONALITY><BIRTH_DATE>16/02/1991</BIRTH_DATE><BIRTH_COUNTRY>000</BIRTH_COUNTRY><NUM_NAT_REG>91021600186</NUM_NAT_REG><CONTRACT><PAYGROUP><FIRM_NR>0000020249</FIRM_NR></PAYGROUP><DIMONA_DECLARATION><DECLARATION_TYPE>5</DECLARATION_TYPE><DATE_EFF_START_ORIG>02/01/2017</DATE_EFF_START_ORIG><DATE_BREACH_ORIG>04/01/2017</DATE_BREACH_ORIG><DATE_FORESEEN_END_ORIG>04/01/2017</DATE_FORESEEN_END_ORIG><CONTRACT_NATURE_ORIG>2</CONTRACT_NATURE_ORIG></DIMONA_DECLARATION><AC_NR>8184123</AC_NR><CONTRACT_NATURE>2</CONTRACT_NATURE><DATE_EFF_START>02/01/2017</DATE_EFF_START><DATE_FORESEEN_END>04/01/2017</DATE_FORESEEN_END><DATE_BREACH>04/01/2017</DATE_BREACH><PAR_COM>302000</PAR_COM><AFFILIATION><EXPL_NR>0001</EXPL_NR></AFFILIATION><CONTRACT_SOCIAL><EMPLOYEE_TYPE>STU</EMPLOYEE_TYPE><PLANNED_HOURS_NR>15</PLANNED_HOURS_NR><HORECA_CONTINGENT_FLAG>1</HORECA_CONTINGENT_FLAG></CONTRACT_SOCIAL><EMPLOYEE_STATUTE>1</EMPLOYEE_STATUTE><CONTRACT_UUID>4f966fec-79b1-4ab2-8f0b-d925308b5217</CONTRACT_UUID></CONTRACT></PERSON></XEI_DIM>\"]}"
        "contractevent_update_student_fao.xml"     | "{\"xeiDims\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><XEI_DIM><PERSON><FULL_NAME>lastname firstname</FULL_NAME><LAST_NAME>lastname</LAST_NAME><FIRST_NAME>firstname</FIRST_NAME><GENDER>1</GENDER><NATIONALITY>000</NATIONALITY><BIRTH_DATE>16/10/2015</BIRTH_DATE><BIRTH_COUNTRY>000</BIRTH_COUNTRY><NUM_NAT_REG>00010100105</NUM_NAT_REG><CONTRACT><PAYGROUP><FIRM_NR>123</FIRM_NR><DEP_NR></DEP_NR><CAT_NR></CAT_NR></PAYGROUP><DIMONA_DECLARATION><DECLARATION_TYPE>5</DECLARATION_TYPE><DATE_EFF_START_ORIG>16/10/2015</DATE_EFF_START_ORIG><DATE_BREACH_ORIG>18/10/2015</DATE_BREACH_ORIG><DATE_FORESEEN_END_ORIG>18/10/2015</DATE_FORESEEN_END_ORIG><CONTRACT_NATURE_ORIG>2</CONTRACT_NATURE_ORIG></DIMONA_DECLARATION><AC_NR>123</AC_NR><CONTRACT_NATURE>2</CONTRACT_NATURE><DATE_EFF_START>16/10/2015</DATE_EFF_START><DATE_FORESEEN_END>18/10/2015</DATE_FORESEEN_END><DATE_BREACH>18/10/2015</DATE_BREACH><PAR_COM>218</PAR_COM><AFFILIATION><EXPL_NR>0001</EXPL_NR></AFFILIATION><CONTRACT_SOCIAL><EMPLOYEE_TYPE>STU</EMPLOYEE_TYPE><PLANNED_DAYS_NR>5</PLANNED_DAYS_NR><HORECA_CONTINGENT_FLAG>1</HORECA_CONTINGENT_FLAG></CONTRACT_SOCIAL><EMPLOYEE_STATUTE>2</EMPLOYEE_STATUTE><CONTRACT_UUID>534d9621-3b3d-4d46-b74b-388011872b43</CONTRACT_UUID></CONTRACT></PERSON></XEI_DIM>\"]}"
        "contractevent_cancel.xml"                 | "{\"xeiDims\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><XEI_DIM><PERSON><FULL_NAME>lastname firstname</FULL_NAME><LAST_NAME>lastname</LAST_NAME><FIRST_NAME>firstname</FIRST_NAME><GENDER>1</GENDER><NATIONALITY>000</NATIONALITY><BIRTH_DATE>16/10/2015</BIRTH_DATE><BIRTH_COUNTRY>000</BIRTH_COUNTRY><NUM_NAT_REG>00010100105</NUM_NAT_REG><CONTRACT><PAYGROUP><FIRM_NR>123</FIRM_NR><DEP_NR></DEP_NR><CAT_NR></CAT_NR></PAYGROUP><DIMONA_DECLARATION><DECLARATION_TYPE>4</DECLARATION_TYPE><DATE_EFF_START_ORIG>08/10/2015</DATE_EFF_START_ORIG><CONTRACT_NATURE_ORIG>2</CONTRACT_NATURE_ORIG></DIMONA_DECLARATION><AC_NR>123</AC_NR><CONTRACT_NATURE>2</CONTRACT_NATURE><DATE_EFF_START>16/10/2015</DATE_EFF_START><DATE_FORESEEN_END>16/10/2015</DATE_FORESEEN_END><DATE_BREACH>16/10/2015</DATE_BREACH><WORKHOURS><HOURLINE><DATE_START>16/10/2015</DATE_START><TIME_START>800</TIME_START><DATE_STOP>16/10/2015</DATE_STOP><TIME_STOP>1200</TIME_STOP><PAUZE>15</PAUZE></HOURLINE><HOURLINE><DATE_START>16/10/2015</DATE_START><TIME_START>1300</TIME_START><DATE_STOP>16/10/2015</DATE_STOP><TIME_STOP>1800</TIME_STOP><PAUZE>30</PAUZE></HOURLINE></WORKHOURS><PAR_COM>218</PAR_COM><CONTRACT_SOCIAL><EMPLOYEE_TYPE>EXT</EMPLOYEE_TYPE><HORECA_CONTINGENT_FLAG>1</HORECA_CONTINGENT_FLAG></CONTRACT_SOCIAL><EMPLOYEE_STATUTE>2</EMPLOYEE_STATUTE><CONTRACT_UUID>534d9621-3b3d-4d46-b74b-388011872b43</CONTRACT_UUID></CONTRACT></PERSON></XEI_DIM>\"]}"
    }

    @Unroll("convert #contractEventFile to Hire (NorthGateArinso)")
    def "Test convert ContractEvent to Hire"() {
        given:
        def contractEvent = ClassLoader.getSystemResourceAsStream("xml/contractevent/" + contractEventFile).text
        def targetUrl = UriComponentsBuilder.fromUriString(url)
                .path("/api/convert/hire")
                .build()
                .toUriString()
        def httpHeaders = new HttpHeaders()
        httpHeaders.setContentType(MediaType.APPLICATION_XML)
        httpHeaders.setAccept(Lists.newArrayList(MediaType.APPLICATION_JSON))
        HttpEntity httpEntity = new HttpEntity(contractEvent, httpHeaders)

        when:
        def result = new TestRestTemplate().exchange(targetUrl, HttpMethod.POST, httpEntity, String.class)

        then:
        result instanceof ResponseEntity
        result.statusCode == HttpStatus.OK
        //remove generated timestamp because it is different each time
        def test = result.getBody().replaceAll(~/(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3})/, "")
        test == body

        where:
        contractEventFile                                      | body
        "contractevent_create_definite_term.xml"               | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><UUID>534d9621-3b3d-4d46-b74b-388011872b43</UUID></Id></KeyInfo><ScenarioInfoContent><Hire><IT0000><ContractStartDate>2016-01-01</ContractStartDate><ContractEndDate>2016-01-31</ContractEndDate></IT0000><IT0001><EmployeeGroup>1</EmployeeGroup><EmployeeSubgroup>03</EmployeeSubgroup><WorkContract>ZZ</WorkContract><Departement>0000</Departement></IT0001><IT0002><Title>1</Title><FirstName>firstname</FirstName><LastName>lastname</LastName><Gender>1</Gender><BirthDate>2015-10-16</BirthDate><CountryOfBirth>000</CountryOfBirth><Nationality>000</Nationality></IT0002><IT0100><INSSNumber>00010100105</INSSNumber></IT0100><IT0016><ContractType>(2</ContractType><LabourCommission>302</LabourCommission></IT0016></Hire></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_create_definite_term_worker.xml"        | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><UUID>534d9621-3b3d-4d46-b74b-388011872b43</UUID></Id></KeyInfo><ScenarioInfoContent><Hire><IT0000><ContractStartDate>2016-01-01</ContractStartDate><ContractEndDate>2016-01-31</ContractEndDate></IT0000><IT0001><EmployeeGroup>1</EmployeeGroup><EmployeeSubgroup>01</EmployeeSubgroup><WorkContract>ZZ</WorkContract></IT0001><IT0002><Title>1</Title><FirstName>firstname</FirstName><LastName>lastname</LastName><Gender>1</Gender><BirthDate>2015-10-16</BirthDate><CountryOfBirth>000</CountryOfBirth><Nationality>000</Nationality></IT0002><IT0100><INSSNumber>00010100105</INSSNumber></IT0100><IT0016><ContractType>(2</ContractType><LabourCommission>302</LabourCommission></IT0016></Hire></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_create_indefinite_term.xml"             | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><UUID>534d9621-3b3d-4d46-b74b-388011872b43</UUID></Id></KeyInfo><ScenarioInfoContent><Hire><IT0000><ContractStartDate>2016-01-01</ContractStartDate><ContractEndDate>2016-01-31</ContractEndDate></IT0000><IT0001><EmployeeGroup>1</EmployeeGroup><EmployeeSubgroup>03</EmployeeSubgroup><WorkContract>ZZ</WorkContract></IT0001><IT0002><Title>1</Title><FirstName>firstname</FirstName><LastName>lastname</LastName><Gender>1</Gender><BirthDate>2015-10-16</BirthDate><CountryOfBirth>000</CountryOfBirth><Nationality>000</Nationality></IT0002><IT0100><INSSNumber>00010100105</INSSNumber></IT0100><IT0016><ContractType>(1</ContractType><LabourCommission>302</LabourCommission></IT0016></Hire></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_create_definite_term_address.xml"       | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><UUID>534d9621-3b3d-4d46-b74b-388011872b43</UUID></Id></KeyInfo><ScenarioInfoContent><Hire><IT0000><ContractStartDate>2016-01-01</ContractStartDate><ContractEndDate>2016-01-31</ContractEndDate></IT0000><IT0001><EmployeeGroup>1</EmployeeGroup><EmployeeSubgroup>03</EmployeeSubgroup><WorkContract>ZZ</WorkContract><Departement>0003</Departement></IT0001><IT0002><Title>1</Title><FirstName>firstname</FirstName><LastName>lastname</LastName><Gender>1</Gender><BirthDate>2015-10-16</BirthDate><CountryOfBirth>000</CountryOfBirth><Nationality>000</Nationality></IT0002><IT0016><ContractType>(2</ContractType><LabourCommission>302</LabourCommission></IT0016><IT0006><Street>rue de</Street><HouseNumber>1</HouseNumber><PostalCode>75008</PostalCode><City>Paris</City><Country>004</Country></IT0006></Hire></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_create_extra.xml"                       | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><UUID>534d9621-3b3d-4d46-b74b-388011872b43</UUID></Id></KeyInfo><ScenarioInfoContent><Hire><IT0000><ContractStartDate>2015-10-16</ContractStartDate><ContractEndDate>2015-10-16</ContractEndDate></IT0000><IT0001><EmployeeGroup>1</EmployeeGroup><EmployeeSubgroup>03</EmployeeSubgroup><WorkContract>XC</WorkContract></IT0001><IT0002><Title>1</Title><FirstName>firstname</FirstName><LastName>lastname</LastName><Gender>1</Gender><BirthDate>2015-10-16</BirthDate><CountryOfBirth>000</CountryOfBirth><Nationality>000</Nationality></IT0002><IT0100><INSSNumber>00010100105</INSSNumber></IT0100><IT0016><ContractType>(2</ContractType><LabourCommission>302</LabourCommission></IT0016><IT2003><validFrom>2015-10-16</validFrom><validTo>2015-10-16</validTo><startTime>08:00:00</startTime><endTime>12:00:00</endTime><break>0,25</break><endTimeOnNextDay>false</endTimeOnNextDay></IT2003><IT2003><validFrom>2015-10-16</validFrom><validTo>2015-10-16</validTo><startTime>13:00:00</startTime><endTime>18:00:00</endTime><break>0,50</break><endTimeOnNextDay>false</endTimeOnNextDay></IT2003><IT0007><CONTINGENT>1</CONTINGENT></IT0007></Hire></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_create_extra_overnacht.xml"             | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><UUID>534d9621-3b3d-4d46-b74b-388011872b43</UUID></Id></KeyInfo><ScenarioInfoContent><Hire><IT0000><ContractStartDate>2015-10-16</ContractStartDate><ContractEndDate>2015-10-16</ContractEndDate></IT0000><IT0001><EmployeeGroup>1</EmployeeGroup><EmployeeSubgroup>03</EmployeeSubgroup><WorkContract>XC</WorkContract></IT0001><IT0002><Title>1</Title><FirstName>firstname</FirstName><LastName>lastname</LastName><Gender>1</Gender><BirthDate>2015-10-16</BirthDate><CountryOfBirth>000</CountryOfBirth><Nationality>000</Nationality></IT0002><IT0100><INSSNumber>00010100105</INSSNumber></IT0100><IT0016><ContractType>(2</ContractType><LabourCommission>302</LabourCommission></IT0016><IT2003><validFrom>2015-10-16</validFrom><validTo>2015-10-16</validTo><startTime>20:00:00</startTime><endTime>03:00:00</endTime><break>0,25</break><endTimeOnNextDay>true</endTimeOnNextDay></IT2003><IT0007><CONTINGENT>1</CONTINGENT></IT0007></Hire></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_create_extra_pauze_1u.xml"              | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>0000020249</Firm><Id><UUID>b509ac0a-1916-4100-9008-c468b6c040da</UUID></Id></KeyInfo><ScenarioInfoContent><Hire><IT0000><ContractStartDate>2016-09-16</ContractStartDate><ContractEndDate>2016-09-16</ContractEndDate></IT0000><IT0001><EmployeeGroup>1</EmployeeGroup><EmployeeSubgroup>01</EmployeeSubgroup><WorkContract>XC</WorkContract></IT0001><IT0002><Title>1</Title><FirstName>Peter</FirstName><LastName>Selis</LastName><Gender>1</Gender><BirthDate>1973-04-28</BirthDate><CountryOfBirth>000</CountryOfBirth><Nationality>000</Nationality></IT0002><IT0100><INSSNumber>73042800141</INSSNumber></IT0100><IT0016><ContractType>(2</ContractType><LabourCommission>302</LabourCommission></IT0016><IT2003><validFrom>2016-09-16</validFrom><validTo>2016-09-16</validTo><startTime>14:00:00</startTime><endTime>22:00:00</endTime><break>1,0</break><endTimeOnNextDay>false</endTimeOnNextDay></IT2003><IT0007><CONTINGENT>1</CONTINGENT></IT0007></Hire></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_create_student.xml"                     | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><UUID>534d9621-3b3d-4d46-b74b-388011872b43</UUID></Id></KeyInfo><ScenarioInfoContent><Hire><IT0000><ContractStartDate>2015-10-16</ContractStartDate><ContractEndDate>2015-12-20</ContractEndDate></IT0000><IT0001><EmployeeGroup>B</EmployeeGroup><EmployeeSubgroup>07</EmployeeSubgroup><WorkContract>XP</WorkContract></IT0001><IT0002><Title>1</Title><FirstName>firstname</FirstName><LastName>lastname</LastName><Gender>1</Gender><BirthDate>2015-10-16</BirthDate><CountryOfBirth>000</CountryOfBirth><Nationality>000</Nationality></IT0002><IT0100><INSSNumber>00010100105</INSSNumber></IT0100><IT0016><ContractType>(2</ContractType><LabourCommission>302</LabourCommission></IT0016><IT9753><EmploymentAddressRefNumber>001</EmploymentAddressRefNumber></IT9753><GIT0016><Planneddaysnbr>10</Planneddaysnbr></GIT0016></Hire></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_create_student_hours.xml"               | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><UUID>534d9621-3b3d-4d46-b74b-388011872b43</UUID></Id></KeyInfo><ScenarioInfoContent><Hire><IT0000><ContractStartDate>2017-01-01</ContractStartDate><ContractEndDate>2017-01-30</ContractEndDate></IT0000><IT0001><EmployeeGroup>B</EmployeeGroup><EmployeeSubgroup>07</EmployeeSubgroup><WorkContract>XP</WorkContract></IT0001><IT0002><Title>1</Title><FirstName>firstname</FirstName><LastName>lastname</LastName><Gender>1</Gender><BirthDate>2015-10-16</BirthDate><CountryOfBirth>000</CountryOfBirth><Nationality>000</Nationality></IT0002><IT0100><INSSNumber>00010100105</INSSNumber></IT0100><IT0016><ContractType>(2</ContractType><LabourCommission>302</LabourCommission></IT0016><IT9753><EmploymentAddressRefNumber>001</EmploymentAddressRefNumber></IT9753><GIT0016><Plannedhoursnbr>100</Plannedhoursnbr></GIT0016></Hire></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_create_student_worker.xml"              | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><UUID>534d9621-3b3d-4d46-b74b-388011872b43</UUID></Id></KeyInfo><ScenarioInfoContent><Hire><IT0000><ContractStartDate>2015-10-16</ContractStartDate><ContractEndDate>2015-12-20</ContractEndDate></IT0000><IT0001><EmployeeGroup>B</EmployeeGroup><EmployeeSubgroup>06</EmployeeSubgroup><WorkContract>XP</WorkContract></IT0001><IT0002><Title>1</Title><FirstName>firstname</FirstName><LastName>lastname</LastName><Gender>1</Gender><BirthDate>2015-10-16</BirthDate><CountryOfBirth>000</CountryOfBirth><Nationality>000</Nationality></IT0002><IT0100><INSSNumber>00010100105</INSSNumber></IT0100><IT0016><ContractType>(2</ContractType><LabourCommission>302</LabourCommission></IT0016><IT9753><EmploymentAddressRefNumber>001</EmploymentAddressRefNumber></IT9753><GIT0016><Planneddaysnbr>10</Planneddaysnbr></GIT0016></Hire></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_create_flexi_period.xml"                | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><UUID>534d9621-3b3d-4d46-b74b-388011872b43</UUID></Id></KeyInfo><ScenarioInfoContent><Hire><IT0000><ContractStartDate>2015-10-16</ContractStartDate><ContractEndDate>2015-12-20</ContractEndDate></IT0000><IT0001><EmployeeGroup>1</EmployeeGroup><EmployeeSubgroup>03</EmployeeSubgroup><WorkContract>YO</WorkContract></IT0001><IT0002><Title>1</Title><FirstName>firstname</FirstName><LastName>lastname</LastName><Gender>1</Gender><BirthDate>2015-10-16</BirthDate><CountryOfBirth>000</CountryOfBirth><Nationality>000</Nationality></IT0002><IT0100><INSSNumber>00010100105</INSSNumber></IT0100><IT0016><ContractType>(2</ContractType><LabourCommission>302</LabourCommission></IT0016></Hire></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_update_with_CombinedNgaIdentifier.xml"  | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><PerNr>01234578</PerNr></Id></KeyInfo><ScenarioInfoContent><ChangeExtraFlexi><IT2003><validFrom>2015-10-16</validFrom><validTo>2015-10-16</validTo><startTime>08:00:00</startTime><endTime>12:00:00</endTime><break>0,25</break><endTimeOnNextDay>false</endTimeOnNextDay></IT2003><IT2003><validFrom>2015-10-16</validFrom><validTo>2015-10-16</validTo><startTime>13:00:00</startTime><endTime>18:00:00</endTime><break>0,50</break><endTimeOnNextDay>false</endTimeOnNextDay></IT2003></ChangeExtraFlexi></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_update_with_UUID.xml"                   | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><UUID>534d9621-3b3d-4d46-b74b-388011872b43</UUID></Id></KeyInfo><ScenarioInfoContent><ChangeExtraFlexi><IT2003><validFrom>2015-10-16</validFrom><validTo>2015-10-16</validTo><startTime>08:00:00</startTime><endTime>12:00:00</endTime><break>0,25</break><endTimeOnNextDay>false</endTimeOnNextDay></IT2003><IT2003><validFrom>2015-10-16</validFrom><validTo>2015-10-16</validTo><startTime>13:00:00</startTime><endTime>18:00:00</endTime><break>0,50</break><endTimeOnNextDay>false</endTimeOnNextDay></IT2003></ChangeExtraFlexi></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_update_with_CombinedIdentifier.xml"     | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><UUID>534d9621-3b3d-4d46-b74b-388011872b43</UUID></Id></KeyInfo><ScenarioInfoContent><ChangeExtraFlexi><IT2003><validFrom>2015-10-16</validFrom><validTo>2015-10-16</validTo><startTime>08:00:00</startTime><endTime>12:00:00</endTime><break>0,25</break><endTimeOnNextDay>false</endTimeOnNextDay></IT2003><IT2003><validFrom>2015-10-16</validFrom><validTo>2015-10-16</validTo><startTime>13:00:00</startTime><endTime>18:00:00</endTime><break>0,50</break><endTimeOnNextDay>false</endTimeOnNextDay></IT2003></ChangeExtraFlexi></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_update_definite_term.xml"               | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><UUID>534d9621-3b3d-4d46-b74b-388011872b43</UUID></Id></KeyInfo><ScenarioInfoContent><Termination><IT0000><ContractEndDate>2016-01-15</ContractEndDate></IT0000></Termination></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_update_indefinite_term.xml"             | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>0000020249</Firm><Id><UUID>cc032c9c-a92b-43e8-9128-10082ee93b07</UUID></Id></KeyInfo><ScenarioInfoContent><Termination><IT0000><ContractEndDate>2016-04-29</ContractEndDate></IT0000></Termination></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_update_indef_with_enddate_present.xml"  | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>0000020249</Firm><Id><UUID>dac1339e-cd62-46a1-988c-729b16cbd2c7</UUID></Id></KeyInfo><ScenarioInfoContent><Termination><IT0000><ContractEndDate>2016-05-01</ContractEndDate></IT0000></Termination></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_update_definite_term_with_sapPerNr.xml" | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><PerNr>01234567</PerNr></Id></KeyInfo><ScenarioInfoContent><Termination><IT0000><ContractEndDate>2016-01-15</ContractEndDate></IT0000></Termination></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_update_student.xml"                     | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><UUID>534d9621-3b3d-4d46-b74b-388011872b43</UUID></Id></KeyInfo><ScenarioInfoContent><ChangeStudent><GIT0016><Planneddaysnbr>7</Planneddaysnbr></GIT0016></ChangeStudent></ScenarioInfoContent></ScenarioInfo></Employee>\",\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><UUID>534d9621-3b3d-4d46-b74b-388011872b43</UUID></Id></KeyInfo><ScenarioInfoContent><Termination><IT0000><ContractEndDate>2015-10-18</ContractEndDate></IT0000></Termination></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_update_student_uren.xml"                | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>0000020249</Firm><Id><UUID>4f966fec-79b1-4ab2-8f0b-d925308b5217</UUID></Id></KeyInfo><ScenarioInfoContent><ChangeStudent><GIT0016><Plannedhoursnbr>15</Plannedhoursnbr></GIT0016></ChangeStudent></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_update_student_fao.xml"                 | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><UUID>534d9621-3b3d-4d46-b74b-388011872b43</UUID></Id></KeyInfo><ScenarioInfoContent><ChangeStudent><IT9753><EmploymentAddressRefNumber>0001</EmploymentAddressRefNumber></IT9753></ChangeStudent></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_cancel.xml"                             | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><UUID>534d9621-3b3d-4d46-b74b-388011872b43</UUID></Id></KeyInfo><ScenarioInfoContent><Annulation/></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
        "contractevent_cancel_with_sapPerNr.xml"               | "{\"hires\":[\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?><Employee><ScenarioInfo><KeyInfo><UpdateUser>HIREAPP</UpdateUser><UpdateTimestamp></UpdateTimestamp><Firm>123</Firm><Id><PerNr>01234567</PerNr></Id></KeyInfo><ScenarioInfoContent><Annulation/></ScenarioInfoContent></ScenarioInfo></Employee>\"]}"
    }

    private List<WorkTimePeriodDto> getWorkHours() {
        return [new WorkTimePeriodDto(15, LocalDateTime.of(2015, 11, 12, 8, 0), LocalDateTime.of(2015, 11, 12, 12, 0)), new WorkTimePeriodDto(30, LocalDateTime.of(2015, 11, 12, 21, 0), LocalDateTime.of(2015, 11, 13, 2, 0))];
    }

    private List<WorkTimePeriodDto> getWorkHours2() {
        return [new WorkTimePeriodDto(60, LocalDateTime.of(2015, 11, 12, 8, 0), LocalDateTime.of(2015, 11, 12, 17, 0))];
    }

    private EmployeeInfoDto getEmployeeInfo() {
        def employeeInfo = new EmployeeInfoDto()
        employeeInfo.setTitle("DEHEER")
        employeeInfo.setFirstName("firstname")
        employeeInfo.setLastName("lastname")
        employeeInfo.setNationality(new CountryCodeDto("000"))
        employeeInfo.setBirthDate(LocalDate.of(2015, 10, 16))
        employeeInfo.setGender("MALE")
        employeeInfo.setBirthCountry(new CountryCodeDto("000"))
        employeeInfo.setEmployeeId(new EmployeeIdDto(new InszNumberDto("00010100105")))
        employeeInfo.setAddress(getAddress())
        return employeeInfo
    }

    private AddressDto getAddress() {
        def address = new AddressDto()
        address.setStreet("street")
        address.setBoxNumber("7")
        address.setHouseNumber("13")
        address.setZip("9000")
        address.setCity("city")
        address.setCountryCode(new CountryCodeDto("000"))
        return address;
    }

    private FirmDto getFirm() {
        def firm = new FirmDto()
        firm.setFirmNumber(new FirmNumberDto("123"))
        firm.setDepartementNumber("")
        firm.setCategory("")
        firm.setPersonNumber("")
        return firm;
    }

    private getMetaData() {
        def metaData = new MetaDataDto()
        metaData.setCtime(LocalDateTime.of(2015, 1, 30, 10, 10))
        metaData.setSender("hire-app")
        metaData.setFupMessageInstanceId("-1")
        return metaData;
    }
}
